# ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ DNS –∑–∞–ø–∏—Å–µ–π –¥–ª—è watchapps.ru

**–î–∞—Ç–∞**: $(date +"%Y-%m-%d %H:%M:%S")

## üéâ –û–¢–õ–ò–ß–ù–´–ï –ù–û–í–û–°–¢–ò!

### SPF –∑–∞–ø–∏—Å—å –û–ë–ù–û–í–õ–ï–ù–ê! ‚úÖ

**–ß–µ—Ä–µ–∑ Google DNS (8.8.8.8)**:
```
v=spf1 mx a:mail.watchapps.ru ip4:81.177.139.192 ~all
```

**–ß–µ—Ä–µ–∑ Cloudflare DNS (1.1.1.1)**:
```
v=spf1 mx a:mail.watchapps.ru ip4:81.177.139.192 ~all
```

**–ß–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π DNS** (–µ—â–µ –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è):
```
v=spf1 ip4:37.140.192.190 a mx include:_spf.hosting.reg.ru ~all
```

**–í—ã–≤–æ–¥**: ‚úÖ SPF –∑–∞–ø–∏—Å—å **–ü–†–ê–í–ò–õ–¨–ù–û –û–ë–ù–û–í–õ–ï–ù–ê**! –õ–æ–∫–∞–ª—å–Ω—ã–π DNS —Å–µ—Ä–≤–µ—Ä –µ—â–µ –Ω–µ –æ–±–Ω–æ–≤–∏–ª –∫–µ—à, –Ω–æ –≤–Ω–µ—à–Ω–∏–µ DNS —Å–µ—Ä–≤–µ—Ä—ã —É–∂–µ –≤–∏–¥—è—Ç –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å.

### –í—Å–µ DNS –∑–∞–ø–∏—Å–∏:

1. **SPF** ‚úÖ **–û–ë–ù–û–í–õ–ï–ù–ê –ü–†–ê–í–ò–õ–¨–ù–û**
   - –°–æ–¥–µ—Ä–∂–∏—Ç IP `81.177.139.192`
   - –°–æ–¥–µ—Ä–∂–∏—Ç `a:mail.watchapps.ru`
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

2. **A –∑–∞–ø–∏—Å—å (mail.watchapps.ru)** ‚úÖ
   - IP: `81.177.139.192`
   - –°–æ–≤–ø–∞–¥–∞–µ—Ç —Å IP —Å–µ—Ä–≤–µ—Ä–∞

3. **MX –∑–∞–ø–∏—Å–∏** ‚úÖ
   - `10 mx1.hosting.reg.ru.`
   - `20 mx2.hosting.reg.ru.`

4. **DMARC** ‚úÖ
   - `v=DMARC1; p=none; rua=mailto:dmarc@watchapps.ru`

5. **DKIM** ‚ùå
   - –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–æ—á—Ç—ã

**–°—Ç–∞—Ç—É—Å**: –ü–æ—Ä—Ç 25 –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º

**–û—à–∏–±–∫–∏**:
- `connect to mxs.mail.ru[94.100.180.31]:25: Connection timed out`
- `connect to mx2.hosting.reg.ru[31.31.194.241]:25: Connection timed out`

**–í –æ—á–µ—Ä–µ–¥–∏**: –ï—Å—Ç—å –ø–∏—Å—å–º–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–æ—Å—Ç–∞–≤–∫–∏

–ü–æ—Å–∫–æ–ª—å–∫—É –ø–æ—Ä—Ç 25 –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å **SMTP Relay** —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å.

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SMTP —Ö–æ—Å—Ç–∏–Ω–≥–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø–æ—á—Ç–æ–≤—ã–π —è—â–∏–∫ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ reg.ru, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ SMTP:

```env
MAIL_MAILER=smtp
MAIL_HOST=smtp.hosting.reg.ru
MAIL_PORT=587
MAIL_USERNAME=noreply@watchapps.ru
MAIL_PASSWORD=your-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@watchapps.ru
MAIL_FROM_NAME="WatchApps"
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å (Mailgun, Postmark, AWS SES).

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|--------|------------|
| DNS SPF | ‚úÖ | **–û–ë–ù–û–í–õ–ï–ù–ê –ü–†–ê–í–ò–õ–¨–ù–û** (—á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ DNS) |
| DNS A | ‚úÖ | –ü—Ä–∞–≤–∏–ª—å–Ω–æ |
| DNS MX | ‚úÖ | –ü—Ä–∞–≤–∏–ª—å–Ω–æ |
| DNS DMARC | ‚úÖ | –ü—Ä–∞–≤–∏–ª—å–Ω–æ |
| DNS DKIM | ‚ùå | –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| Postfix | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç |
| Laravel Mail | ‚úÖ | –ù–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ |
| –î–æ—Å—Ç–∞–≤–∫–∞ –ø–∏—Å–µ–º | ‚ùå | –ü–æ—Ä—Ç 25 –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω |

## ‚úÖ –í—ã–≤–æ–¥

**DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** SPF –∑–∞–ø–∏—Å—å –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP –∞–¥—Ä–µ—Å.

**–û—Å—Ç–∞–ª–æ—Å—å**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SMTP Relay –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ä—Ç–∞ 25.



